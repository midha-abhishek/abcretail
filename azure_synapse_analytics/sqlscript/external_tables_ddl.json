{
	"name": "external_tables_ddl",
	"properties": {
		"content": {
			"query": "-- Creating an external file format for delta tables\n\n-- CREATE EXTERNAL FILE FORMAT [ext_delta_format]\n-- WITH (\n--     FORMAT_TYPE = DELTA\n-- )\n\n\n\n---------------------------------------------------------------------------\n\n\n\n-- Creating external data sources\n\n-- CREATE EXTERNAL DATA SOURCE [extdatasource_curated]\n--     WITH (LOCATION = 'abfss://curated@dlsaabcretail.dfs.core.windows.net/');\n\n-- CREATE EXTERNAL DATA SOURCE [extdatasource_staging]\n--     WITH (LOCATION = 'abfss://staging@dlsaabcretail.dfs.core.windows.net/');\n\n\n\n---------------------------------------------------------------------------\n\n\n\n-- Creating External Tables For Datasets From the HTTP API Source\n\n\n\n-- CREATE EXTERNAL TABLE [http_Accessories]\n-- (\n--     ProductID INT,\n--     Category NVARCHAR(4000),\n--     SubCategory NVARCHAR(4000),\n--     ProductName NVARCHAR(4000),\n--     Brand NVARCHAR(4000),\n--     Sizes NVARCHAR(MAX),\n--     Colors NVARCHAR(MAX),\n--     Price DECIMAL(10,2),\n--     Description NVARCHAR(MAX),\n--     ingestion_timestamp DATETIME\n-- )\n-- WITH (\n--     LOCATION = 'delta/http/accessories/',\n--     DATA_SOURCE = [extdatasource_curated],\n--     FILE_FORMAT = [ext_delta_format]\n-- );\n\nSELECT TOP 10 * FROM [http_Accessories];\n\n\n\n-- CREATE EXTERNAL TABLE [http_Clothing]\n-- (\n--     ProductID INT,\n--     Category NVARCHAR(4000),\n--     SubCategory NVARCHAR(4000),\n--     ProductName NVARCHAR(4000),\n--     Brand NVARCHAR(4000),\n--     Sizes NVARCHAR(MAX),\n--     Colors NVARCHAR(MAX),\n--     Price DECIMAL(10,2),\n--     Description NVARCHAR(MAX),\n--     ingestion_timestamp DATETIME\n-- )\n-- WITH (\n--     LOCATION = 'delta/http/clothing/',\n--     DATA_SOURCE = [extdatasource_curated],\n--     FILE_FORMAT = [ext_delta_format]\n-- );\n\n\n\nSELECT TOP 10 * FROM [http_Clothing];\n\n-- CREATE EXTERNAL TABLE [http_Footwear]\n-- (\n--     ProductID INT,\n--     Category NVARCHAR(4000),\n--     SubCategory NVARCHAR(4000),\n--     ProductName NVARCHAR(4000),\n--     Brand NVARCHAR(4000),\n--     Sizes NVARCHAR(MAX),\n--     Colors NVARCHAR(MAX),\n--     Price DECIMAL(10,2),\n--     Description NVARCHAR(MAX),\n--     ingestion_timestamp DATETIME\n-- )\n-- WITH (\n--     LOCATION = 'delta/http/footwear/',\n--     DATA_SOURCE = [extdatasource_curated],\n--     FILE_FORMAT = [ext_delta_format]\n-- );\n\nSELECT TOP 10 * FROM [http_Footwear];\n\n\n\n-- CREATE EXTERNAL TABLE [http_HomeDecor]\n-- (\n--     ProductID INT,\n--     Category NVARCHAR(4000),\n--     SubCategory NVARCHAR(4000),\n--     ProductName NVARCHAR(4000),\n--     Brand NVARCHAR(4000),\n--     Sizes NVARCHAR(MAX),\n--     Colors NVARCHAR(MAX),\n--     Price DECIMAL(10,2),\n--     Description NVARCHAR(MAX),\n--     ingestion_timestamp DATETIME\n-- )\n-- WITH (\n--     LOCATION = 'delta/http/home_decor/',\n--     DATA_SOURCE = [extdatasource_curated],\n--     FILE_FORMAT = [ext_delta_format]\n-- );\n\nSELECT TOP 10 * FROM [http_HomeDecor];\n\n\n\n-- CREATE EXTERNAL TABLE [http_Products]\n-- (\n--     ProductID INT,\n--     Category NVARCHAR(4000),\n--     SubCategory NVARCHAR(4000),\n--     ProductName NVARCHAR(4000),\n--     Brand NVARCHAR(4000),\n--     Sizes NVARCHAR(MAX),\n--     Colors NVARCHAR(MAX),\n--     Price DECIMAL(10,2),\n--     Description NVARCHAR(MAX),\n--     ingestion_timestamp DATETIME\n-- )\n-- WITH (\n--     LOCATION = 'delta/http/products/',\n--     DATA_SOURCE = [extdatasource_staging],\n--     FILE_FORMAT = [ext_delta_format]\n-- );\n\nSELECT TOP 10 * FROM [http_Products];\n\n\n\n---------------------------------------------------------------------------\n\n\n\n-- Creating External Tables For Datasets From the Azure SQL Database Source\n\n\n\n-- CREATE EXTERNAL TABLE [azsqldb_Address]\n-- (\n--     AddressID INT,\n--     AddressLine1 NVARCHAR(4000),\n--     AddressLine2 NVARCHAR(4000),\n--     City NVARCHAR(4000),\n--     StateProvince NVARCHAR(4000),\n--     CountryRegion NVARCHAR(4000),\n--     PostalCode NVARCHAR(4000),\n--     rowguid NVARCHAR(4000),\n--     ModifiedDate DATETIME,\n--     ingestion_timestamp DATETIME\n-- )\n-- WITH (\n--     LOCATION = 'delta/azsqldb/address/',\n--     DATA_SOURCE = [extdatasource_curated],\n--     FILE_FORMAT = [ext_delta_format]\n-- );\n\n\nSELECT TOP 10 * FROM [azsqldb_Address];\n\n\n\n-- CREATE EXTERNAL TABLE [azsqldb_Customer]\n-- (\n--     CustomerID INT,\n--     NameStyle BIT,\n--     Title NVARCHAR(4000),\n--     FirstName NVARCHAR(4000),\n--     MiddleName NVARCHAR(4000),\n--     LastName NVARCHAR(4000),\n--     Suffix NVARCHAR(4000),\n--     CompanyName NVARCHAR(4000),\n--     SalesPerson NVARCHAR(4000),\n--     EmailAddress NVARCHAR(4000),\n--     Phone NVARCHAR(4000),\n--     PasswordHash NVARCHAR(4000),\n--     PasswordSalt NVARCHAR(4000),\n--     rowguid NVARCHAR(4000),\n--     ModifiedDate DATETIME,\n--     ingestion_timestamp DATETIME\n-- )\n-- WITH (\n--     LOCATION = 'delta/azsqldb/customer/',\n--     DATA_SOURCE = [extdatasource_curated],\n--     FILE_FORMAT = [ext_delta_format]\n-- );\n\nSELECT TOP 10 * FROM [azsqldb_Customer];\n\n\n\n-- CREATE EXTERNAL TABLE [azsqldb_CustomerAddress]\n-- (\n--     CustomerID INT,\n--     AddressID INT,\n--     AddressType NVARCHAR(4000),\n--     rowguid NVARCHAR(4000),\n--     ModifiedDate DATETIME,\n--     ingestion_timestamp DATETIME\n-- )\n-- WITH (\n--     LOCATION = 'delta/azsqldb/customer_address/',\n--     DATA_SOURCE = [extdatasource_curated],\n--     FILE_FORMAT = [ext_delta_format]\n-- );\n\nSELECT TOP 10 * FROM [azsqldb_CustomerAddress];\n\n\n\n-- CREATE EXTERNAL TABLE [azsqldb_Product]\n-- (\n--     ProductID INT,\n--     Name NVARCHAR(4000),\n--     ProductNumber NVARCHAR(4000),\n--     Color NVARCHAR(4000),\n--     StandardCost FLOAT,\n--     ListPrice FLOAT,\n--     Size NVARCHAR(4000),\n--     Weight FLOAT,\n--     ProductCategoryID INT,\n--     ProductModelID INT,\n--     SellStartDate DATETIME,\n--     SellEndDate DATETIME,\n--     DiscontinuedDate DATETIME,\n--     ThumbNailPhoto VARBINARY(MAX),\n--     ThumbnailPhotoFileName NVARCHAR(4000),\n--     rowguid NVARCHAR(4000),\n--     ModifiedDate DATETIME,\n--     ingestion_timestamp DATETIME\n-- )\n-- WITH (\n--     LOCATION = 'delta/azsqldb/product/',\n--     DATA_SOURCE = [extdatasource_curated],\n--     FILE_FORMAT = [ext_delta_format]\n-- );\n\nSELECT TOP 10 * FROM [azsqldb_Product];\n\n\n\n-- CREATE EXTERNAL TABLE [azsqldb_ProductCategory]\n-- (\n--     ProductCategoryID INT,\n--     ParentProductCategoryID INT,\n--     Name NVARCHAR(4000),\n--     rowguid NVARCHAR(4000),\n--     ModifiedDate DATETIME,\n--     ingestion_timestamp DATETIME\n-- )\n-- WITH (\n--     LOCATION = 'delta/azsqldb/product_category/',\n--     DATA_SOURCE = [extdatasource_curated],\n--     FILE_FORMAT = [ext_delta_format]\n-- );\n\nSELECT TOP 10 * FROM [azsqldb_ProductCategory];\n\n\n\n-- CREATE EXTERNAL TABLE [azsqldb_ProductDescription]\n-- (\n--     ProductDescriptionID INT,\n--     Description NVARCHAR(4000),\n--     rowguid NVARCHAR(4000),\n--     ModifiedDate DATETIME,\n--     ingestion_timestamp DATETIME\n-- )\n-- WITH (\n--     LOCATION = 'delta/azsqldb/product_description/',\n--     DATA_SOURCE = [extdatasource_curated],\n--     FILE_FORMAT = [ext_delta_format]\n-- );\n\nSELECT TOP 10 * FROM [azsqldb_ProductDescription];\n\n\n\n-- CREATE EXTERNAL TABLE [azsqldb_ProductModel]\n-- (\n--     ProductModelID INT,\n--     Name NVARCHAR(4000),\n--     CatalogDescription NVARCHAR(4000),\n--     rowguid NVARCHAR(4000),\n--     ModifiedDate DATETIME,\n--     ingestion_timestamp DATETIME\n-- )\n-- WITH (\n--     LOCATION = 'delta/azsqldb/product_model/',\n--     DATA_SOURCE = [extdatasource_curated],\n--     FILE_FORMAT = [ext_delta_format]\n-- );\n\nSELECT TOP 10 * FROM [azsqldb_ProductModel];\n\n\n\n-- CREATE EXTERNAL TABLE [azsqldb_ProductModelProductDescription]\n-- (\n--     ProductModelID INT,\n--     ProductDescriptionID INT,\n--     Culture NVARCHAR(4000),\n--     rowguid NVARCHAR(4000),\n--     ModifiedDate DATETIME,\n--     ingestion_timestamp DATETIME\n-- )\n-- WITH (\n--     LOCATION = 'delta/azsqldb/productmodel_productdescription/',\n--     DATA_SOURCE = [extdatasource_curated],\n--     FILE_FORMAT = [ext_delta_format]\n-- );\n\nSELECT TOP 10 * FROM [azsqldb_ProductModelProductDescription];\n\n\n\n-- CREATE EXTERNAL TABLE [azsqldb_SalesOrderDetail]\n-- (\n--     SalesOrderID INT,\n--     SalesOrderDetailID INT,\n--     OrderQty INT,\n--     ProductID INT,\n--     UnitPrice FLOAT,\n--     UnitPriceDiscount FLOAT,\n--     LineTotal FLOAT,\n--     rowguid NVARCHAR(4000),\n--     ModifiedDate DATETIME,\n--     ingestion_timestamp DATETIME\n-- )\n-- WITH (\n--     LOCATION = 'delta/azsqldb/salesorder_detail/',\n--     DATA_SOURCE = [extdatasource_curated],\n--     FILE_FORMAT = [ext_delta_format]\n-- );\n\nSELECT TOP 10 * FROM [azsqldb_SalesOrderDetail];\n\n\n\n-- CREATE EXTERNAL TABLE [azsqldb_SalesOrderHeader]\n-- (\n--     SalesOrderID INT,\n--     RevisionNumber INT,\n--     OrderDate DATETIME,\n--     DueDate DATETIME,\n--     ShipDate DATETIME,\n--     Status INT,\n--     OnlineOrderFlag BIT,\n--     SalesOrderNumber NVARCHAR(4000),\n--     PurchaseOrderNumber NVARCHAR(4000),\n--     AccountNumber NVARCHAR(4000),\n--     CustomerID INT,\n--     ShipToAddressID INT,\n--     BillToAddressID INT,\n--     ShipMethod NVARCHAR(4000),\n--     CreditCardApprovalCode NVARCHAR(4000),\n--     SubTotal FLOAT,\n--     TaxAmt FLOAT,\n--     Freight FLOAT,\n--     TotalDue FLOAT,\n--     Comment NVARCHAR(4000),\n--     rowguid NVARCHAR(4000),\n--     ModifiedDate DATETIME,\n--     ingestion_timestamp DATETIME\n-- )\n-- WITH (\n--     LOCATION = 'delta/azsqldb/salesorder_header/',\n--     DATA_SOURCE = [extdatasource_curated],\n--     FILE_FORMAT = [ext_delta_format]\n-- );\n\nSELECT TOP 10 * FROM [azsqldb_SalesOrderHeader];\n\n\n\n---------------------------------------------------------------------------\n\n\n\n-- Creating External Tables For Datasets From the On-Premise Microsoft SQL Server Source\n\n\n\n-- CREATE EXTERNAL TABLE [onprem_CountryRolling]\n-- (\n--     CountryID INT,\n--     CountryName NVARCHAR(4000),\n--     ingestion_timestamp DATETIME\n-- )\n-- WITH (\n--     LOCATION = 'delta/onprem/country_rolling/',\n--     DATA_SOURCE = [extdatasource_curated],\n--     FILE_FORMAT = [ext_delta_format]\n-- );\n\nSELECT TOP 10 * FROM [onprem_CountryRolling];\n\n\n\n-- CREATE EXTERNAL TABLE [onprem_Customer]\n-- (\n--     CustomerID INT,\n--     FirstName NVARCHAR(4000),\n--     LastName NVARCHAR(4000),\n--     Email NVARCHAR(4000),\n--     Phone NVARCHAR(4000),\n--     AddressLine1 NVARCHAR(4000),\n--     AddressLine2 NVARCHAR(4000),\n--     City NVARCHAR(4000),\n--     StateID INT,\n--     PostalCode NVARCHAR(4000),\n--     CountryID INT,\n--     ingestion_timestamp DATETIME\n-- )\n-- WITH (\n--     LOCATION = 'delta/onprem/customer/',\n--     DATA_SOURCE = [extdatasource_curated],\n--     FILE_FORMAT = [ext_delta_format]\n-- );\n\nSELECT TOP 10 * FROM [onprem_Customer];\n\n\n\n-- CREATE EXTERNAL TABLE [onprem_CusomerProductReview]\n-- (\n--     ReviewID INT,\n--     ProductID INT,\n--     CustomerID INT,\n--     Rating INT,\n--     Review NVARCHAR(4000),\n--     ingestion_timestamp DATETIME\n-- )\n-- WITH (\n--     LOCATION = 'delta/onprem/customer_productreview/',\n--     DATA_SOURCE = [extdatasource_curated],\n--     FILE_FORMAT = [ext_delta_format]\n-- );\n\nSELECT TOP 10 * FROM [onprem_CusomerProductReview];\n\n\n\n-- CREATE EXTERNAL TABLE [onprem_CustomerSellerReview]\n-- (\n--     ReviewID INT,\n--     SellerID INT,\n--     CustomerID INT,\n--     Rating INT,\n--     Review NVARCHAR(4000),\n--     ingestion_timestamp DATETIME\n-- )\n-- WITH (\n--     LOCATION = 'delta/onprem/customer_sellerreview/',\n--     DATA_SOURCE = [extdatasource_curated],\n--     FILE_FORMAT = [ext_delta_format]\n-- );\n\nSELECT TOP 10 * FROM [onprem_CustomerSellerReview];\n\n\n\n-- CREATE EXTERNAL TABLE [onprem_Order]\n-- (\n--     OrderID INT,\n--     PromotionProductID INT,\n--     CustomerID INT,\n--     Quantity INT,\n--     ingestion_timestamp DATETIME\n-- )\n-- WITH (\n--     LOCATION = 'delta/onprem/order/',\n--     DATA_SOURCE = [extdatasource_curated],\n--     FILE_FORMAT = [ext_delta_format]\n-- );\n\nSELECT TOP 10 * FROM [onprem_Order];\n\n\n\n-- CREATE EXTERNAL TABLE [onprem_Product]\n-- (\n--     ProductID INT,\n--     CategoryID INT,\n--     ProductName NVARCHAR(4000),\n--     Brand NVARCHAR(4000),\n--     Specifications NVARCHAR(4000),\n--     ingestion_timestamp DATETIME\n-- )\n-- WITH (\n--     LOCATION = 'delta/onprem/product/',\n--     DATA_SOURCE = [extdatasource_curated],\n--     FILE_FORMAT = [ext_delta_format]\n-- );\n\nSELECT TOP 10 * FROM [onprem_Product];\n\n\n\n-- CREATE EXTERNAL TABLE [onprem_ProductCategories]\n-- (\n--     CategoryID INT,\n--     CategoryName NVARCHAR(4000),\n--     ingestion_timestamp DATETIME\n-- )\n-- WITH (\n--     LOCATION = 'delta/onprem/product_categories/',\n--     DATA_SOURCE = [extdatasource_curated],\n--     FILE_FORMAT = [ext_delta_format]\n-- );\n\nSELECT TOP 10 * FROM [onprem_ProductCategories];\n\n\n\n-- CREATE EXTERNAL TABLE [onprem_ProductQuality]\n-- (\n--     ProductQualityID INT,\n--     QualityType NVARCHAR(4000),\n--     ingestion_timestamp DATETIME\n-- )\n-- WITH (\n--     LOCATION = 'delta/onprem/product_quality/',\n--     DATA_SOURCE = [extdatasource_curated],\n--     FILE_FORMAT = [ext_delta_format]\n-- );\n\nSELECT TOP 10 * FROM [onprem_ProductQuality];\n\n\n\n-- CREATE EXTERNAL TABLE [onprem_Promotion]\n-- (\n--     PromotionID INT,\n--     PromotionDescription NVARCHAR(4000),\n--     DiscountPercentage FLOAT,\n--     ingestion_timestamp DATETIME\n-- )\n-- WITH (\n--     LOCATION = 'delta/onprem/promotion/',\n--     DATA_SOURCE = [extdatasource_curated],\n--     FILE_FORMAT = [ext_delta_format]\n-- );\n\nSELECT TOP 10 * FROM [onprem_Promotion];\n\n\n\n-- CREATE EXTERNAL TABLE [onprem_Seller]\n-- (\n--     SellerID INT,\n--     SellerName NVARCHAR(4000),\n--     Email NVARCHAR(4000),\n--     Phone NVARCHAR(4000),\n--     AddressLine1 NVARCHAR(4000),\n--     AddressLine2 NVARCHAR(4000),\n--     City NVARCHAR(4000),\n--     StateID INT,\n--     PostalCode NVARCHAR(4000),\n--     CountryID INT,\n--     ingestion_timestamp DATETIME\n-- )\n-- WITH (\n--     LOCATION = 'delta/onprem/seller/',\n--     DATA_SOURCE = [extdatasource_curated],\n--     FILE_FORMAT = [ext_delta_format]\n-- );\n\nSELECT TOP 10 * FROM [onprem_Seller];\n\n\n\n-- CREATE EXTERNAL TABLE [onprem_SellerProductPromotion]\n-- (\n--     PromotionProductID INT,\n--     ProductID INT,\n--     SellerID INT,\n--     ProductQualityID INT,\n--     Price FLOAT,\n--     PromotionID INT,\n--     ingestion_timestamp DATETIME\n-- )\n-- WITH (\n--     LOCATION = 'delta/onprem/seller_product_promotion/',\n--     DATA_SOURCE = [extdatasource_curated],\n--     FILE_FORMAT = [ext_delta_format]\n-- );\n\nSELECT TOP 10 * FROM [onprem_SellerProductPromotion];\n\n\n\n-- CREATE EXTERNAL TABLE [onprem_StateProvinceRolling]\n-- (\n--     StateID INT,\n--     StateName NVARCHAR(4000),\n--     CountryID INT,\n--     ingestion_timestamp DATETIME\n-- )\n-- WITH (\n--     LOCATION = 'delta/onprem/state_province_rolling/',\n--     DATA_SOURCE = [extdatasource_curated],\n--     FILE_FORMAT = [ext_delta_format]\n-- );\n\nSELECT TOP 10 * FROM [onprem_StateProvinceRolling];\n\n\n\n",
			"metadata": {
				"language": "sql"
			},
			"currentConnection": {
				"databaseName": "abcretail_serverless_sqldb",
				"poolName": "Built-in"
			},
			"resultLimit": 5000
		},
		"type": "SqlQuery"
	}
}